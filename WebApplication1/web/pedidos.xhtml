<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
    
<h:head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Deportes 360 - Mis Pedidos</title>
    <h:outputStylesheet library="css" name="index.css" />
</h:head>
<h:body>

    <!-- HEADER -->
    <div class="header">
        <div class="container">
            <div class="menu">
                <h:graphicImage library="images" name="logo-deporte.png" styleClass="logo" alt="Logo Deportes 360" />

                <h:form>
                    <h:selectBooleanCheckbox id="menu" />
                    <label for="menu">
                        <h:graphicImage library="images" name="logo-deporte.png" styleClass="menu-icono" alt="Menú" />
                    </label>
                </h:form>

                <div class="navbar">
                    <ul>
                        <li><a href="admin.xhtml">Panel</a></li>
                        <li><a href="productos.xhtml">Productos</a></li>
                        <li><h:link value="Mis Pedidos" outcome="pedidos" styleClass="active" /></li>
                        <li><a href="../login.xhtml">Cerrar sesión</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- MAIN CONTENT -->
    <div class="container" style="margin-top:120px;">
        <h2>Mis Pedidos</h2>

        <h:panelGroup rendered="#{empty pedidosBean.ventas}">
            <p>No tienes pedidos aún.</p>
        </h:panelGroup>

        <ui:repeat value="#{pedidosBean.ventas}" var="venta">
            <div style="border:1px solid #ccc; padding:15px; margin:15px 0; border-radius:8px;">
                <p><strong>Pedido ##{venta.id}</strong></p>
                <p><strong>Fecha:</strong> #{venta.fechaVenta}</p>
                <p><strong>Total:</strong> $#{venta.totalVenta}</p>

                <h:form>
                    <h:commandButton value="Ver Detalle" style="background-color:#007bff; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer;"
                                     onclick="var detalle=document.getElementById('detalle-#{venta.id}'); detalle.style.display = (detalle.style.display === 'none') ? 'block' : 'none'; return false;" />
                </h:form>

                <div id="detalle-#{venta.id}" style="display:none; margin-top:10px;">
                    <h:panelGroup rendered="#{not empty venta.envio and not empty venta.envio.repartidor}">
                        <p><strong>Repartidor:</strong> #{venta.envio.repartidor.nombreRepar}</p>
                        <p><strong>Vehículo:</strong> #{venta.envio.repartidor.tipoDeVehi}</p>
                        <p><strong>Placa:</strong> #{venta.envio.repartidor.numPlaca}</p>
                    </h:panelGroup>
                    <h:panelGroup rendered="#{empty venta.envio or empty venta.envio.repartidor}">
                        <p>Aún no se ha asignado un repartidor.</p>
                    </h:panelGroup>
                </div>
            </div>
        </ui:repeat>
    </div>

</h:body>
</html>

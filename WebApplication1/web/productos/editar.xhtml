<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

<h:head>
    <title>Editar Producto</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
          rel="stylesheet" />
</h:head>

<h:body class="bg-light">

    <div class="container mt-4 p-4 bg-white shadow rounded">

        <h2 class="text-primary mb-4">Editar Producto</h2>

        <!-- FORMULARIO ÚNICO -->
        <h:form enctype="multipart/form-data">

            <h:inputHidden value="#{productoBean.producto.cod}" />

            <div class="row g-3">

                <!-- Código -->
                <div class="col-md-4">
                    <label class="form-label">Código:</label>
                    <h:inputText id="cod" value="#{productoBean.producto.cod}"
                                 required="true" requiredMessage="Debe especificar un Código"
                                 styleClass="form-control" />
                    <h:message for="cod" styleClass="text-danger small" />
                </div>

                <!-- Nombre -->
                <div class="col-md-4">
                    <label class="form-label">Nombre:</label>
                    <h:inputText id="nom" value="#{productoBean.producto.nombre}"
                                 required="true" requiredMessage="Debe especificar un Nombre"
                                 styleClass="form-control" />
                    <h:message for="nom" styleClass="text-danger small" />
                </div>

                <!-- Precio -->
                <div class="col-md-4">
                    <label class="form-label">Precio:</label>
                    <h:inputText id="pre" value="#{productoBean.producto.precio}"
                                 required="true" requiredMessage="Debe especificar un Precio"
                                 styleClass="form-control" />
                    <h:message for="pre" styleClass="text-danger small" />
                </div>

                <!-- Descripción -->
                <div class="col-12">
                    <label class="form-label">Descripción:</label>
                    <h:inputTextarea id="des" value="#{productoBean.producto.descr}"
                                     required="true" requiredMessage="Debe especificar una Descripción"
                                     styleClass="form-control" rows="3" />
                    <h:message for="des" styleClass="text-danger small" />
                </div>

                <!-- Existencias -->
                <div class="col-md-6">
                    <label class="form-label">Existencias:</label>
                    <h:inputText id="ext" value="#{productoBean.producto.exist}"
                                 required="true" requiredMessage="Debe especificar la Cantidad"
                                 styleClass="form-control" />
                    <h:message for="ext" styleClass="text-danger small" />
                </div>

                <!-- Fecha vence -->
                <div class="col-md-6">
                    <label class="form-label">Fecha de Vencimiento:</label>
                    <h:inputText id="fev" value="#{productoBean.producto.fven}"
                                 required="true" requiredMessage="Debe especificar una Fecha"
                                 styleClass="form-control">
                        <f:convertDateTime pattern="yyyy-MM-dd" />
                    </h:inputText>
                    <h:message for="fev" styleClass="text-danger small" />
                </div>

                <!-- Imagen actual -->
                <div class="col-md-4">
                    <label class="form-label d-block">Imagen Actual:</label>
                    <img src="#{productoBean.producto.foto}"
                         class="img-thumbnail shadow-sm"
                         style="width: 120px; height: auto; border-radius: 6px;" />
                </div>

                <!-- Nueva imagen -->
                <div class="col-md-8">
                    <label class="form-label">Nueva Imagen:</label>
                    <h:inputFile id="img" value="#{productoBean.imagen}"
                                 styleClass="form-control" />
                    <h:message for="img" styleClass="text-danger small" />
                </div>

            </div>

            <!-- BOTONES -->
            <div class="mt-4 text-end">
                <h:commandButton value="Actualizar"
                                 action="#{productoBean.actualizar}"
                                 styleClass="btn btn-success me-2" />

                <h:commandButton value="Volver"
                                 action="admin?faces-redirect=true"
                                 immediate="true"
                                 styleClass="btn btn-secondary" />
            </div>

        </h:form>

    </div>

</h:body>
</html>
